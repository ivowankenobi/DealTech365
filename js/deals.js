// Real Products - Amazon Affiliate Links
// Auto-generated from scraper on 2025-11-26T20:50:44.590Z
// Last update: 26/11/2025, 21:50:44

const DEAL_CATEGORIES = {
  audio: {
    name: 'Audio',
    icon: 'ðŸŽ§',
    products: [
      {
        name: 'Auriculares InalÃ¡mbricos Deportivos, 2025 Auriculare Deportivos Conduccion Ã“sea Bluetooth 5.4, Open-Ear Inalambricos con 50H de ReproducciÃ³n, Cascos Bluetooth con Ruido Pantalla LED',
        brand: 'Auriculares',
        basePrice: 199.99,
        discount: 84,
        image: 'https://m.media-amazon.com/images/I/61KiM+QNS7L._AC_UL320_.jpg',
        asin: 'B0FWRVMZPD',
        specs: {
          bluetooth: 'Bluetooth 5.4',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0FWRVMZPD?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0FWRVMZPD?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Auriculares InalÃ¡mbricos Bluetooth, Auriculares Bluetooth 5.4 HiFi EstÃ©reo, 56H Cascos Inalambricos Bluetooth con ENC ReducciÃ³n de Ruido, Pantalla LED, USB-C, Control TÃ¡ctil, IP7 Impermeable Audifonos',
        brand: 'Auriculares',
        basePrice: 89.99,
        discount: 73,
        image: 'https://m.media-amazon.com/images/I/61AKEgLS-oL._AC_UL320_.jpg',
        asin: 'B0FR4SMRXY',
        specs: {
          bluetooth: 'Bluetooth 5.4',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0FR4SMRXY?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0FR4SMRXY?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'LG Auriculares intraurales Bluetooth Tone Free T90S con Sonido Dolby Atmos, tecnologÃ­a Meridian, cancelaciÃ³n Activa de Ruido (ANC), y UVnano+, Negro',
        brand: 'Unknown',
        basePrice: 229,
        discount: 61,
        image: 'https://m.media-amazon.com/images/I/61OXbN-zpxL._AC_UL320_.jpg',
        asin: 'B0CG27DV5P',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0CG27DV5P?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0CG27DV5P?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Auriculares InalÃ¡mbricos Bluetooth, Auriculares Bluetooth 5.3, 4 Mic con ReducciÃ³n de Ruido ENC, 50H con Graves, Cascos Inalambricos Bluetooth IP7 Impermeable, Carga RÃ¡pida USB-C, Ajuste CÃ³modo',
        brand: 'Auriculares',
        basePrice: 49.99,
        discount: 59,
        image: 'https://m.media-amazon.com/images/I/710Lppy-fzL._AC_UL320_.jpg',
        asin: 'B0CCDNJS75',
        specs: {
          bluetooth: 'Bluetooth 5.3',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0CCDNJS75?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0CCDNJS75?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Auriculares InalÃ¡mbricos Deportivos, 2023 Auriculares Bluetooth 5.3, 120H de ReproducciÃ³n con Cancelacion Ruido ENC, Auriculares Inalambricos IPX7 Impermeable, Carga RÃ¡pida USB-C Pantalla LED',
        brand: 'Auriculares',
        basePrice: 49.99,
        discount: 59,
        image: 'https://m.media-amazon.com/images/I/81JqAOVInkL._AC_UL320_.jpg',
        asin: 'B0C748DZRH',
        specs: {
          bluetooth: 'Bluetooth 5.3',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0C748DZRH?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0C748DZRH?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Auriculares InalÃ¡mbricos Bluetooth, Auriculares Bluetooth 5.3, 4 Mic con ReducciÃ³n de Ruido ENC, 50H con Graves, Cascos Inalambricos Bluetooth IP7 Impermeable, Carga RÃ¡pida USB-C, Ajuste CÃ³modo',
        brand: 'Auriculares',
        basePrice: 49.99,
        discount: 59,
        image: 'https://m.media-amazon.com/images/I/71-m3Etug6L._AC_UL320_.jpg',
        asin: 'B0CNGYY5LZ',
        specs: {
          bluetooth: 'Bluetooth 5.3',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0CNGYY5LZ?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0CNGYY5LZ?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Soundcore C30i Auriculares InalÃ¡mbricos Abiertos Bluetooth Clip, Ligeros y CÃ³modos, Ajuste Estable, DiseÃ±o de Carcasa Firme, Agarres Fijables, Grandes Transductores para Sonido NÃ­tido, 30H, IPX4',
        brand: 'Soundcore',
        basePrice: 69.99,
        discount: 57,
        image: 'https://m.media-amazon.com/images/I/61C7zTHoOAL._AC_UL320_.jpg',
        asin: 'B0D2W27KZC',
        specs: {
          processor: 'core C30i',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0D2W27KZC?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0D2W27KZC?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'JBL Auriculares Tune 520 BT, inÃ¡lambricos por Bluetooth, 57 horas de reproducciÃ³n con JBL Pure Bass, plegables, negro',
        brand: 'JBL',
        basePrice: 59.99,
        discount: 55,
        image: 'https://m.media-amazon.com/images/I/512LuQyL3BL._AC_UL320_.jpg',
        asin: 'B0BYWMLVG1',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0BYWMLVG1?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0BYWMLVG1?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Auriculares InalÃ¡mbricos Deportivos Bluetooth 5.4, 75H de AutonomÃ­a, HD Mic, HiFi EstÃ©reo, CancelaciÃ³n de Ruido ENC, IP7 Impermeable, Azul',
        brand: 'Auriculares',
        basePrice: 59.99,
        discount: 55,
        image: 'https://m.media-amazon.com/images/I/71C6M3lsKAL._AC_UL320_.jpg',
        asin: 'B0D4QNYQ1P',
        specs: {
          bluetooth: 'Bluetooth 5.4',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0D4QNYQ1P?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0D4QNYQ1P?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Sennheiser HD 599 - Auriculares abiertos, EdiciÃ³n especial, Negro, AlÃ¡mbrico',
        brand: 'Sennheiser',
        basePrice: 169,
        discount: 53,
        image: 'https://m.media-amazon.com/images/I/81cWWVMM8+L._AC_UL320_.jpg',
        asin: 'B07Q7S7247',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B07Q7S7247?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B07Q7S7247?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Jabra New Evolve 10 Auricular con Cable y micrÃ³fono con cancelaciÃ³n de Ruido para PC/portÃ¡til - USB-A - Certificado TCO - Ligero - Controles de Llamada/Volumen para reuniones en lÃ­nea - Negro',
        brand: 'Jabra',
        basePrice: 42.35,
        discount: 53,
        image: 'https://m.media-amazon.com/images/I/61afZ3q+jtL._AC_UL320_.jpg',
        asin: 'B0F1DGSZPZ',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0F1DGSZPZ?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0F1DGSZPZ?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'JBL Tune Flex TWS, Auriculares In Ear inalÃ¡mbricos con cancelaciÃ³n activa del ruido, graves potentes, resistencia al agua IPX4, 8 a 24h de baterÃ­a, estuche de carga, negro',
        brand: 'JBL',
        basePrice: 99.99,
        discount: 52,
        image: 'https://m.media-amazon.com/images/I/413LocbLPjL._AC_UL320_.jpg',
        asin: 'B0B5GP9FXN',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0B5GP9FXN?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0B5GP9FXN?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'JBL Auriculares Tune 770 NC, auriculares circumaurales inalÃ¡mbricos con cancelaciÃ³n de ruido adaptativa, Bluetooth y 70 horas de baterÃ­a, negro',
        brand: 'JBL',
        basePrice: 129.99,
        discount: 49,
        image: 'https://m.media-amazon.com/images/I/517VpVlts7L._AC_UL320_.jpg',
        asin: 'B09CYX92NB',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B09CYX92NB?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B09CYX92NB?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'JBL Auriculares Tune 720 BT, inÃ¡lambricos por Bluetooth, 76 horas de reproducciÃ³n con JBL Pure Bass, plegables, negro',
        brand: 'JBL',
        basePrice: 79.99,
        discount: 48,
        image: 'https://m.media-amazon.com/images/I/51JNhjr4McL._AC_UL320_.jpg',
        asin: 'B0BWVQKSSY',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0BWVQKSSY?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0BWVQKSSY?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Sony ULT Wear Auriculares inalÃ¡mbricos con Noise Cancelling, ULT Power Sound, Ultimate Deep Bass, Mismo procesador Que los WH-1000XM5, Llamadas nÃ­tidas, 30 Horas de baterÃ­a, iOS y Android, Negro',
        brand: 'Sony',
        basePrice: 199,
        discount: 47,
        image: 'https://m.media-amazon.com/images/I/61mJKW9SGmL._AC_UL320_.jpg',
        asin: 'B0CX1TJXKV',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0CX1TJXKV?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0CX1TJXKV?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Philips TAH4209BK Auriculares on-Ear Ligeros Bluetooth, Aislamiento pasivo del Ruido, 55 Horas de reproducciÃ³n, Sonido Natural, Llamadas nÃ­tidas, Graves dinÃ¡micos, 2 Horas de Carga USB-C, 2024, Negro',
        brand: 'Philips',
        basePrice: 39.49,
        discount: 47,
        image: 'https://m.media-amazon.com/images/I/61BBGbQF9gL._AC_UL320_.jpg',
        asin: 'B0CZRS76JR',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0CZRS76JR?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0CZRS76JR?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Soundcore AeroFit 2 de Anker, Auriculares Open-Ear, Ganchos de Oreja Ajustables, Ajuste, Graves Intensos, Audio InalÃ¡mbrico Hi-Res, ReproducciÃ³n 42 H, Bluetooth 5.4, Carga InalÃ¡mbrica, IP55',
        brand: 'Soundcore',
        basePrice: 129.99,
        discount: 46,
        image: 'https://m.media-amazon.com/images/I/51mOItIaCDL._AC_UL320_.jpg',
        asin: 'B0DFCHZ699',
        specs: {
          processor: 'core AeroFit',
          bluetooth: 'Bluetooth 5.4',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DFCHZ699?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DFCHZ699?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'JBL Endurance Peak 3, auriculares activos inalÃ¡mbricos con resistencia al agua IP68 y hasta 50 horas de duraciÃ³n de la baterÃ­a, en negro',
        brand: 'JBL',
        basePrice: 99.99,
        discount: 42,
        image: 'https://m.media-amazon.com/images/I/51XSPn3jSoL._AC_UL320_.jpg',
        asin: 'B0BJL685Q7',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0BJL685Q7?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0BJL685Q7?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'HUAWEI FreeArc Auriculares Open-Ear, InalÃ¡mbricos Bluetooth, Resistencia al Agua IP57, 28 Horas, Auriculares Deportivos con iOS, Android o Windows, Negro',
        brand: 'Huawei',
        basePrice: 119,
        discount: 42,
        image: 'https://m.media-amazon.com/images/I/61wZnAB5mML._AC_UL320_.jpg',
        asin: 'B0DTHRBPJV',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DTHRBPJV?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DTHRBPJV?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'JLab Go Air Pop+ Auriculares Inalambricos Bluetooth, Wireless Earbuds 35+ Horas Rendimiento con Caja de Carga - Audifonos Bluetooth Inalambricos con MicrÃ³fono, Dual Connect, App, Tone 7572',
        brand: 'JLab',
        basePrice: 29.99,
        discount: 42,
        image: 'https://m.media-amazon.com/images/I/71WSN0IMG5L._AC_UL320_.jpg',
        asin: 'B0CYP6HLXJ',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0CYP6HLXJ?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0CYP6HLXJ?tag=dealtech365-21'
          }
        }
      }
    ]
  },
  smartphones: {
    name: 'Smartphones',
    icon: 'ðŸ“±',
    products: [
      {
        name: 'Moto g05 24GB (8G+16GB RAM Boost)/256GB Azul, EspaÃ±a, Pantalla superbrillante de 6.67 Pulgadas, Sistema de cÃ¡maras de 50 MP, Modo Retrato con IA, Soft luxe, Corning Gorilla Glass 3, baterÃ­a 5200 mAh',
        brand: 'Moto',
        basePrice: 179,
        discount: 47,
        image: 'https://m.media-amazon.com/images/I/81RhkXq8bmL._AC_UL320_.jpg',
        asin: 'B0F7RY35V1',
        specs: {
          ram: '16GB',
          storage: '24GB',
          screen: '6.67"',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0F7RY35V1?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0F7RY35V1?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'XIAOMI Redmi Note 14 - Smartphone de 8+256GB, Pantalla de 6.67" AMOLED FHD+ 120Hz, MediaTek Helio G99-Ultra, cÃ¡mara de 108MP, TurboCharge 33W, 5500 mAh, Cargador no Incluido, Verde (VersiÃ³n ES)',
        brand: 'Xiaomi',
        basePrice: 249.9,
        discount: 40,
        image: 'https://m.media-amazon.com/images/I/71-sUk9cdDL._AC_UL320_.jpg',
        asin: 'B0DKP6P66T',
        specs: {
          storage: '256GB',
          screen: '6.67"',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DKP6P66T?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DKP6P66T?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Motorola Moto g15 24GB (8G+16GB RAM Boost)/256GB Azul, EspaÃ±a, Pantalla de 6.72\'\' FHD+, Sistema de cÃ¡maras de 50 MP y Objetivo Ultra Gran Angular, BaterÃ­a 5200 mAh, Carga TurboPower, Soft Luxe',
        brand: 'Motorola',
        basePrice: 199,
        discount: 38,
        image: 'https://m.media-amazon.com/images/I/81KrEtwwkAL._AC_UL320_.jpg',
        asin: 'B0F9X7Z4QM',
        specs: {
          ram: '16GB',
          storage: '24GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0F9X7Z4QM?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0F9X7Z4QM?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'XIAOMI POCO X7 - Smartphone de 8+256GB, Pantalla CrystalRes 1.5K AMOLED Curva, MediaTek Dimensity 7300-Ultra, CÃ¡mara de 50 MP, Carga Turbo de 45W, Cargador no Incluido, Plata (VersiÃ³n ES)',
        brand: 'Xiaomi',
        basePrice: 299.9,
        discount: 35,
        image: 'https://m.media-amazon.com/images/I/61ct3FPtzmL._AC_UL320_.jpg',
        asin: 'B0DLGVSDL8',
        specs: {
          storage: '256GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DLGVSDL8?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DLGVSDL8?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'HONOR 400 Lite 5G - Smartphone de 8GB+256GB, Dual SIM NFC, 108MP con BotÃ³n con IA, 6.7\'\', Pantalla AMOLED con protecciÃ³n de la Vista, BaterÃ­a de 5230mAh, IP65&SGS, MagicOS 9.0, Velvet Gray',
        brand: 'HONOR',
        basePrice: 299,
        discount: 34,
        image: 'https://m.media-amazon.com/images/I/5105qXyGL2L._AC_UL320_.jpg',
        asin: 'B0F3JD79PH',
        specs: {
          storage: '8GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0F3JD79PH?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0F3JD79PH?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'DOOGEE Fire 5 Ultra Telefono Movil Irrompible, 32GB+256GB/2TB 1200LM MÃ³vil Resistente, MTK G81, 13000mAh 6.6" TelÃ©fono Android 15, Linterna para Camping/48MP/4G Dual SIM/Huella&Face ID/NFC Smartphone',
        brand: 'DOOGEE',
        basePrice: 299.99,
        discount: 33,
        image: 'https://m.media-amazon.com/images/I/71U7nX5sEJL._AC_UL320_.jpg',
        asin: 'B0FQJB2KK9',
        specs: {
          storage: '32GB',
          screen: '6.6"',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0FQJB2KK9?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0FQJB2KK9?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'XIAOMI POCO X7 Pro - Smartphone de 12+256GB, Pantalla CrystalRes 1.5K 120Hz AMOLED, MediaTek Dimensity 8400-Ultra, CÃ¡mara de 50 MP, 90W HyperCharge, Cargador no Incluido, Verde (VersiÃ³n ES)',
        brand: 'Xiaomi',
        basePrice: 399.9,
        discount: 33,
        image: 'https://m.media-amazon.com/images/I/61Cny8eb3UL._AC_UL320_.jpg',
        asin: 'B0DKP5LQGP',
        specs: {
          storage: '256GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DKP5LQGP?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DKP5LQGP?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'DOOGEE Note 56 TelÃ©fono Movil Android 16, 6150mAh BaterÃ­a de Anodo de Silicio, 6,56" HD+ IPS 90Hz, Octa Core 24GB+64GB Smartphone, 8MP, Cuerpo 8.45mm Telefono, Face ID/OTG/GPS/Doble SIM 4G Movil',
        brand: 'DOOGEE',
        basePrice: 119.99,
        discount: 33,
        image: 'https://m.media-amazon.com/images/I/71Dz2446BOL._AC_UL320_.jpg',
        asin: 'B0FQ2RSQ41',
        specs: {
          storage: '24GB',
          screen: '56"',
          processor: 'Core 24GB+64GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0FQ2RSQ41?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0FQ2RSQ41?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'XIAOMI REDMI 15 - Smartphone de 6+128GB, CÃ¡mara Dual de 50MP con AI, Pantalla inmersiva de 6,9â€ FHD+, Snapdragon 685, Carga rÃ¡pida de 33W, Cargador no Incluido, Morado (VersiÃ³n ES)',
        brand: 'Xiaomi',
        basePrice: 179.9,
        discount: 32,
        image: 'https://m.media-amazon.com/images/I/61B1DSV5bGL._AC_UL320_.jpg',
        asin: 'B0FH2TTXHC',
        specs: {
          storage: '128GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0FH2TTXHC?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0FH2TTXHC?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'XIAOMI POCO C85 - Smartphone de 8+256GB, CÃ¡mara Dual de 50MP con AI, Pantalla inmersiva de 6,9â€, Potente procesador Octa-Core, Carga rÃ¡pida de 33W, 6000mAh, Cargador no Incluido, Negro (VersiÃ³n ES)',
        brand: 'Xiaomi',
        basePrice: 169.9,
        discount: 31,
        image: 'https://m.media-amazon.com/images/I/6133BD60olL._AC_UL320_.jpg',
        asin: 'B0FHQD5M7D',
        specs: {
          storage: '256GB',
          processor: 'Core',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0FHQD5M7D?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0FHQD5M7D?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'HONOR 400 5G-Smartphone 8GB+256GB, CÃ¡mara de 200MP con IA, Super Zoom con IA,6.55â€ y 120Hz y 5000 nits,Snapdragon 7 Gen 3,Android 15, Dual SIM, NFC, IP65,MagicOS 9.0-Desert Gold',
        brand: 'HONOR',
        basePrice: 499,
        discount: 30,
        image: 'https://m.media-amazon.com/images/I/61JPZEJkGbL._AC_UL320_.jpg',
        asin: 'B0F8VCCFHC',
        specs: {
          storage: '8GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0F8VCCFHC?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0F8VCCFHC?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'DOOGEE Blade20 Telefono Movil Irrompible, 10300mAh MÃ³vil rugerizado Andriod 15, 6.6\'\' HD+90Hz 20GB+128GB/2TB, MÃ³vil Resistente, Smartphone 4G Dual SIM/NFC/GPS/3 Ranuras/Face ID 2025',
        brand: 'DOOGEE',
        basePrice: 199.99,
        discount: 29,
        image: 'https://m.media-amazon.com/images/I/8101qByEKDL._AC_UL320_.jpg',
        asin: 'B0F9NH4685',
        specs: {
          storage: '20GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0F9NH4685?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0F9NH4685?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'realme P3 5G Smartphone,12+512GB, BaterÃ­a de 5260 mAh,Carga de 45W,Chipset Snapdragon 6 Gen 4, CÃ¡mara AI de 50MP, Pantalla Pro-Esports de 2000 nits120Hz,IP69, Gris (Sin Adaptador)',
        brand: 'realme',
        basePrice: 349.99,
        discount: 29,
        image: 'https://m.media-amazon.com/images/I/71WHTasfK-L._AC_UL320_.jpg',
        asin: 'B0F4KKD71G',
        specs: {
          storage: '512GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0F4KKD71G?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0F4KKD71G?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Motorola Moto g85 5G 24GB (12GB mÃ¡s 12GB RAM Boost)-256GB Verde, Pantalla de Borde Infinito de 6,67 y Sonido Dolby Atmos, CÃ¡mara Sony LYTIA 600 de 50MP con OIS, BaterÃ­a 5000 mAh, Carga TurboPower 30W',
        brand: 'Sony',
        basePrice: 229,
        discount: 28,
        image: 'https://m.media-amazon.com/images/I/81BjFCq5B1L._AC_UL320_.jpg',
        asin: 'B0FLF7YPPR',
        specs: {
          ram: '12GB',
          storage: '24GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0FLF7YPPR?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0FLF7YPPR?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Google Pixel 9a â€“ Smartphone Android Libre con cÃ¡mara con IA, baterÃ­a para Todo el dÃ­a y potentes Funciones de Seguridad â€“ Obsidiana, 128GB',
        brand: 'Google',
        basePrice: 549,
        discount: 27,
        image: 'https://m.media-amazon.com/images/I/71OA-qXBpSL._AC_UL320_.jpg',
        asin: 'B0DSWFHTL2',
        specs: {
          storage: '128GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DSWFHTL2?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DSWFHTL2?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'Samsung GALAXY A16 LTE SM-A165FZKBEUB',
        brand: 'Samsung',
        basePrice: 164.56,
        discount: 27,
        image: 'https://m.media-amazon.com/images/I/51P7ksIGCuL._AC_UL320_.jpg',
        asin: 'B0DPHC4RQW',
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DPHC4RQW?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DPHC4RQW?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'XIAOMI POCO F7 - Smartphone de 12+256GB, CÃ¡mara Sony de 50 MP con OIS, Pantalla AMOLED de 6,83\'\' 1.5K a 120Hz, Snapdragon 8s Gen 4, Hypercharge 90W, Cargador no Incluido, Plata (VersiÃ³n ES)',
        brand: 'Sony',
        basePrice: 449.9,
        discount: 27,
        image: 'https://m.media-amazon.com/images/I/61tLKtnLTLL._AC_UL320_.jpg',
        asin: 'B08NCQXZ8C',
        specs: {
          storage: '256GB',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B08NCQXZ8C?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B08NCQXZ8C?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'OPPO A40m - Smartphone Libre, 16GB(8GB+8GB) 256GB, Pantalla HD+ LCD 6.7", CÃ¡mara 50+2+8 MP, Android, BaterÃ­a 5100mAh, Carga RÃ¡pida 45W - Negro',
        brand: 'OPPO',
        basePrice: 179,
        discount: 26,
        image: 'https://m.media-amazon.com/images/I/81aoo-O9KDL._AC_UL320_.jpg',
        asin: 'B0DFGKM1Z5',
        specs: {
          storage: '16GB',
          screen: '6.7"',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DFGKM1Z5?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DFGKM1Z5?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'XIAOMI Redmi 15 4G 8+256GB Smartphone â€“ BaterÃ­a 7000mAh | Pantalla 6.9" FHD+ 144Hz | Snapdragon 685 | CÃ¡mara Dual 50MP | Carga RÃ¡pida 33W | DiseÃ±o Quad-Curve (Negro, con Funda)',
        brand: 'Xiaomi',
        basePrice: 179.99179,
        discount: 25,
        image: 'https://m.media-amazon.com/images/I/710nXIHWqVL._AC_UL320_.jpg',
        asin: 'B0FMRSCNSN',
        specs: {
          storage: '256GB',
          screen: '6.9"',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0FMRSCNSN?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0FMRSCNSN?tag=dealtech365-21'
          }
        }
      },
      {
        name: 'XIAOMI Redmi Note 14 5G - Smartphone de 8+256GB, Pantalla de 6.67" AMOLED FHD+ 120Hz, MediaTek Dimensity 7025-Ultra, cÃ¡mara de 108MP, 5110 mAh, Cargador no Incluido, Negro (VersiÃ³n ES)',
        brand: 'Xiaomi',
        basePrice: 239,
        discount: 25,
        image: 'https://m.media-amazon.com/images/I/71hFQK+amuL._AC_UL320_.jpg',
        asin: 'B0DKP645L3',
        specs: {
          storage: '256GB',
          screen: '6.67"',
        },
        affiliateLinks: {
          US: {
            amazon: 'https://www.amazon.com/dp/B0DKP645L3?tag=blackfridaytech-20'
          },
          EU: {
            amazon: 'https://www.amazon.es/dp/B0DKP645L3?tag=dealtech365-21'
          }
        }
      }
    ]
  },
  laptops: {
    name: 'Ordenadores',
    icon: 'ðŸ’»',
    products: [
      {
        name: 'Lenovo IdeaPad Slim 3 Gen 8 - PortÃ¡til 15.6" FHD (Intel Core i5-12450H, 16GB RAM, 512GB SSD, Intel UHD Graphics, Windows 11 Home) Gris Ãrtico - Teclado QWERTY EspaÃ±ol',
        brand: 'Lenovo',
        basePrice: 649,
        discount: 23,
        image: 'https://m.media-amazon.com/images/I/71-gfkIWFBL._AC_SX679_.jpg',
        asin: 'B0C3R3X4D6',
        specs: {
          processor: 'Intel Core i5',
          ram: '16GB',
          storage: '512GB SSD'
        },
        affiliateLinks: {
          US: { amazon: 'https://www.amazon.com/s?k=Lenovo+IdeaPad+Slim+3&tag=blackfridaytech-20' },
          EU: { amazon: 'https://www.amazon.es/s?k=Lenovo+IdeaPad+Slim+3&tag=dealtech365-21' }
        }
      },
      {
        name: 'HP 15s-fq5085ns - Ordenador PortÃ¡til de 15.6" Full HD (Intel Core i5-1235U, 16GB RAM, 512GB SSD, Intel Iris Xe Graphics, Sin Sistema Operativo) Plata - Teclado QWERTY EspaÃ±ol',
        brand: 'HP',
        basePrice: 599,
        discount: 22,
        image: 'https://m.media-amazon.com/images/I/810g8-iWk8L._AC_SX679_.jpg',
        asin: 'B0C6V5M9M6',
        specs: {
          processor: 'Intel Core i5',
          ram: '16GB',
          storage: '512GB SSD'
        },
        affiliateLinks: {
          US: { amazon: 'https://www.amazon.com/s?k=HP+15s&tag=blackfridaytech-20' },
          EU: { amazon: 'https://www.amazon.es/s?k=HP+15s&tag=dealtech365-21' }
        }
      },
      {
        name: 'ASUS TUF Gaming F15 FX507ZC4 - PortÃ¡til Gaming 15.6" Full HD 144Hz (Intel Core i7-12700H, 16GB RAM, 512GB SSD, RTX 3050 4GB, Sin Sistema Operativo) Gris Mecha - Teclado QWERTY EspaÃ±ol',
        brand: 'ASUS',
        basePrice: 1099,
        discount: 36,
        image: 'https://m.media-amazon.com/images/I/716f9-M1jQL._AC_SX679_.jpg',
        asin: 'B0C3R2H6L6',
        specs: {
          processor: 'Intel Core i7',
          ram: '16GB',
          graphics: 'RTX 3050'
        },
        affiliateLinks: {
          US: { amazon: 'https://www.amazon.com/s?k=ASUS+TUF+Gaming+F15&tag=blackfridaytech-20' },
          EU: { amazon: 'https://www.amazon.es/s?k=ASUS+TUF+Gaming+F15&tag=dealtech365-21' }
        }
      }
    ]
  },
  gaming: {
    name: 'Gaming',
    icon: 'ðŸŽ®',
    products: [
      {
        name: 'Logitech G502 HERO RatÃ³n Gaming con Cable, Sensor HERO 25K, 25,600 DPI, RGB, Peso Ajustable, 11 Botones Programables, Memoria Integrada, PC/Mac - Negro',
        brand: 'Logitech',
        basePrice: 89.99,
        discount: 56,
        image: 'https://m.media-amazon.com/images/I/61mpMH5TzkL._AC_SX679_.jpg',
        asin: 'B07W5JKFQC',
        specs: {
          sensor: 'HERO 25K',
          dpi: '25,600',
          buttons: '11'
        },
        affiliateLinks: {
          US: { amazon: 'https://www.amazon.com/s?k=Logitech+G502+HERO&tag=blackfridaytech-20' },
          EU: { amazon: 'https://www.amazon.es/s?k=Logitech+G502+HERO&tag=dealtech365-21' }
        }
      },
      {
        name: 'Razer Kraken X Lite - Auriculares Gaming Ultraligeros para PC, Mac, Xbox One, PS4 y Switch, Diadema Acolchada, Sonido Surround 7.1, Negro',
        brand: 'Razer',
        basePrice: 49.99,
        discount: 40,
        image: 'https://m.media-amazon.com/images/I/61QIMDB3YTL._AC_SX679_.jpg',
        asin: 'B07Y8S9J9R',
        specs: {
          audio: 'Surround 7.1',
          weight: '250g'
        },
        affiliateLinks: {
          US: { amazon: 'https://www.amazon.com/s?k=Razer+Kraken+X+Lite&tag=blackfridaytech-20' },
          EU: { amazon: 'https://www.amazon.es/s?k=Razer+Kraken+X+Lite&tag=dealtech365-21' }
        }
      },
      {
        name: 'PlayStation 5 - Mando InalÃ¡mbrico DualSense, Color White',
        brand: 'PlayStation',
        basePrice: 69.99,
        discount: 14,
        image: 'https://m.media-amazon.com/images/I/51U87xJ-RSL._AC_SX679_.jpg',
        asin: 'B08H99BPJN',
        specs: {
          platform: 'PS5',
          connectivity: 'Wireless'
        },
        affiliateLinks: {
          US: { amazon: 'https://www.amazon.com/s?k=PlayStation+5+DualSense&tag=blackfridaytech-20' },
          EU: { amazon: 'https://www.amazon.es/s?k=PlayStation+5+DualSense&tag=dealtech365-21' }
        }
      }
    ]
  }
};

// Generate deals with pricing
function generateDeals(userRegion) {
  const region = userRegion.isEurope ? 'EU' : 'US';
  const currency = userRegion.currency;
  const currencySymbol = userRegion.currencySymbol;

  const allDeals = [];

  Object.keys(DEAL_CATEGORIES).forEach(categoryKey => {
    const category = DEAL_CATEGORIES[categoryKey];

    category.products.forEach(product => {
      const finalPrice = Math.round(product.basePrice * (1 - product.discount / 100));

      // Always use Amazon link for this region
      const regionLinks = product.affiliateLinks[region];
      const affiliateLink = regionLinks.amazon;

      allDeals.push({
        ...product,
        category: categoryKey,
        categoryName: category.name,
        finalPrice: finalPrice,
        savings: product.basePrice - finalPrice,
        currency: currency,
        currencySymbol: currencySymbol,
        affiliateLink: affiliateLink,
        network: 'amazon'
      });
    });
  });

  return allDeals;
}

// Export for module usage
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { DEAL_CATEGORIES };
}
// Initialize deals on page load
let allDeals = [];

document.addEventListener('DOMContentLoaded', () => {
  // Get user region
  const userRegion = window.getUserRegion ? window.getUserRegion() : {
    isEurope: true,
    currency: 'EUR',
    currencySymbol: 'â‚¬'
  };

  // Generate deals (Try service first, fallback to local generation)
  if (window.dealsService) {
    // Show loading state if needed, or just wait
    window.dealsService.getAllDeals(userRegion.isEurope ? 'EU' : 'US').then(result => {
      allDeals = result.deals;
      displayDeals();

      // Update favorite buttons after deals are loaded
      setTimeout(() => {
        updateFavoriteButtons();
      }, 100);
    });
  } else {
    allDeals = generateDeals(userRegion);
    displayDeals();
  }

  // Update favorite buttons after a short delay to ensure DOM is ready
  setTimeout(() => {
    updateFavoriteButtons();
    console.log('âœ… Favorite buttons updated on page load');
  }, 100);

  // Also update when deals are displayed
  const dealsGrid = document.getElementById('dealsGrid');
  if (dealsGrid) {
    const observer = new MutationObserver(() => {
      updateFavoriteButtons();
    });
    observer.observe(dealsGrid, { childList: true, subtree: true });
  }
});

// Display deals function
function displayDeals(dealsToShow = null) {
  const container = document.getElementById('dealsGrid');
  if (!container) return;

  const deals = dealsToShow || allDeals;

  if (!deals || deals.length === 0) {
    container.innerHTML = '<p style="text-align:center;padding:40px;color:#666;">No se encontraron productos.</p>';
    return;
  }

  container.innerHTML = deals.map(deal => {
    try {
      if (!deal || !deal.name) return '';

      const specsHtml = deal.specs ? Object.entries(deal.specs).map(([key, value]) =>
        `<span class="spec-item"><strong>${key}:</strong> ${value}</span>`
      ).join('') : '';

      return `
    <div class="deal-card" data-category="${deal.category || 'unknown'}" data-brand="${(deal.brand || 'unknown').toLowerCase()}">
      <div class="deal-image" style="background-image: url('${deal.image || ''}')">
        <div class="deal-badge">${deal.discount || 0}% OFF</div>
      </div>
      <div class="deal-content">
        <div class="deal-header">
          <h3 class="deal-title">${deal.name}</h3>
          <div class="deal-store-badge" data-store="amazon">
            <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon" style="height: 14px; width: auto; vertical-align: middle;">
          </div>
        </div>

        <div class="deal-content-main">
          <p class="deal-brand">${deal.brand || 'Unknown'}</p>

          <div class="deal-specs">
            ${specsHtml}
          </div>
        </div>

        <div class="deal-price">
          <span class="deal-price-current">${deal.currencySymbol || 'â‚¬'}${deal.finalPrice || 0}</span>
          <span class="deal-price-original">${deal.currencySymbol || 'â‚¬'}${deal.basePrice || 0}</span>
        </div>

        <div class="deal-actions">
          <a href="${deal.affiliateLink || '#'}"
             target="_blank"
             rel="noopener noreferrer"
             class="deal-btn-premium">
            Ver oferta
          </a>
          <button class="deal-btn-favorite" onclick="toggleFavorite('${deal.asin || ''}')" aria-label="Add to favorites">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  `;
    } catch (e) {
      console.error('Error rendering deal:', deal, e);
      return '';
    }
  }).join('');
}

// Favorites functionality
function toggleFavorite(asin) {
  const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
  const index = favorites.indexOf(asin);

  if (index > -1) {
    favorites.splice(index, 1);
  } else {
    favorites.push(asin);
  }

  localStorage.setItem('favorites', JSON.stringify(favorites));
  updateFavoriteButtons();

  // Sync with Firebase if user is logged in
  if (window.authSystem && window.authSystem.currentUser) {
    window.authSystem.saveFavorite(asin);
  }
}

function updateFavoriteButtons() {
  const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
  document.querySelectorAll('.deal-btn-favorite').forEach(btn => {
    const card = btn.closest('.deal-card');
    const asin = card.querySelector('.deal-btn-premium').href.match(/\/dp\/([A-Z0-9]+)/)[1];
    if (favorites.includes(asin)) {
      btn.classList.add('active');
    } else {
      btn.classList.remove('active');
    }
  });
}

// Filter and search functions
function filterByCategory(category) {
  if (category === 'all') {
    displayDeals(allDeals);
  } else {
    const filtered = allDeals.filter(deal => deal.category === category);
    displayDeals(filtered);
  }
}

function filterByBrand(brand) {
  if (brand === 'all') {
    displayDeals(allDeals);
  } else {
    const filtered = allDeals.filter(deal => deal.brand.toLowerCase() === brand.toLowerCase());
    displayDeals(filtered);
  }
}

function searchDeals(query) {
  const lowerQuery = query.toLowerCase();
  const filtered = allDeals.filter(deal => {
    if (!deal) return false;
    const nameMatch = deal.name && deal.name.toLowerCase().includes(lowerQuery);
    const brandMatch = deal.brand && deal.brand.toLowerCase().includes(lowerQuery);
    const specsMatch = deal.specs && Object.values(deal.specs).some(spec =>
      spec && spec.toString().toLowerCase().includes(lowerQuery)
    );
    return nameMatch || brandMatch || specsMatch;
  });
  displayDeals(filtered);
}

function sortDeals(sortBy) {
  let sorted = [...allDeals];

  switch (sortBy) {
    case 'price-asc':
      sorted.sort((a, b) => a.finalPrice - b.finalPrice);
      break;
    case 'price-desc':
      sorted.sort((a, b) => b.finalPrice - a.finalPrice);
      break;
    case 'discount':
      sorted.sort((a, b) => b.discount - a.discount);
      break;
    case 'name':
      sorted.sort((a, b) => a.name.localeCompare(b.name));
      break;
  }

  displayDeals(sorted);
}

// Export for use in other scripts
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { DEAL_CATEGORIES, generateDeals };
}

// Make functions available globally for event listeners
window.filterByCategory = filterByCategory;
window.filterByBrand = filterByBrand;
window.searchDeals = searchDeals;
window.sortDeals = sortDeals;
window.generateDeals = generateDeals;
