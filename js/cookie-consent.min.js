!function(){"use strict";const e="bf_cookie_consent",n={necessary:{name:"Necesarias",description:"Cookies esenciales para el funcionamiento del sitio (regi칩n, idioma, favoritos)",required:!0,enabled:!0},analytics:{name:"Anal칤ticas",description:"Nos ayudan a entender c칩mo usas el sitio (Google Analytics)",required:!1,enabled:!1},marketing:{name:"Marketing",description:"Rastrean tu actividad para personalizar anuncios y ofertas",required:!1,enabled:!1},affiliates:{name:"Afiliados",description:"Rastrean clicks en productos para comisiones (Amazon, Newegg, Best Buy)",required:!1,enabled:!0}};function o(){const n=t(e);if(!n)return!1;try{return"1.0"===JSON.parse(n).version}catch(e){return!1}}function t(e){const n=`; ${document.cookie}`.split(`; ${e}=`);return 2===n.length?n.pop().split(";").shift():null}function i(n){const o={version:"1.0",timestamp:(new Date).toISOString(),preferences:n};!function(e,n,o){const t=new Date;t.setTime(t.getTime()+24*o*60*60*1e3);const i=`expires=${t.toUTCString()}`;document.cookie=`${e}=${n};${i};path=/;SameSite=Lax`}(e,JSON.stringify(o),365),a(n),window.dispatchEvent(new CustomEvent("cookieConsentUpdated",{detail:n})),console.log("Cookie consent saved:",n)}function a(e){e.analytics?window.gtag&&(window.gtag("consent","update",{analytics_storage:"granted"}),console.log("Analytics enabled")):window.gtag&&(window.gtag("consent","update",{analytics_storage:"denied"}),console.log("Analytics disabled")),e.marketing?console.log("Marketing cookies enabled"):console.log("Marketing cookies disabled"),console.log("Affiliate tracking:",e.affiliates?"enabled":"disabled")}function c(){const e=document.createElement("div");e.id="cookieConsentBanner",e.className="cookie-consent-banner",e.innerHTML='\n      <div class="cookie-consent-content">\n        <div class="cookie-consent-text">\n          <h3>游꼵 Usamos cookies</h3>\n          <p>\n            Utilizamos cookies para mejorar tu experiencia, analizar el tr치fico y mostrarte ofertas relevantes.\n            Algunas cookies son necesarias para el funcionamiento del sitio.\n            <a href="/pages/privacy-policy.html" target="_blank" style="color: var(--primary); text-decoration: underline;">M치s informaci칩n</a>\n          </p>\n        </div>\n        <div class="cookie-consent-actions">\n          <button id="cookieAcceptAll" class="btn primary">\n            Aceptar todas\n          </button>\n          <button id="cookieCustomize" class="btn ghost">\n            Personalizar\n          </button>\n          <button id="cookieRejectNonEssential" class="btn ghost">\n            Solo necesarias\n          </button>\n        </div>\n      </div>\n    ',document.body.appendChild(e),document.getElementById("cookieAcceptAll").addEventListener("click",s),document.getElementById("cookieCustomize").addEventListener("click",l),document.getElementById("cookieRejectNonEssential").addEventListener("click",d)}function s(){i({necessary:!0,analytics:!0,marketing:!0,affiliates:!0}),m()}function d(){i({necessary:!0,analytics:!1,marketing:!1,affiliates:!0}),m()}function l(){let e=document.getElementById("cookieCustomizeModal");e||(!function(){const e=document.createElement("div");e.id="cookieCustomizeModal",e.className="cookie-modal",e.innerHTML=`\n      <div class="cookie-modal-content">\n        <div class="cookie-modal-header">\n          <h2>Configuraci칩n de cookies</h2>\n          <button id="cookieModalClose" class="cookie-modal-close">&times;</button>\n        </div>\n        <div class="cookie-modal-body">\n          <p style="margin-bottom: 1.5rem; color: var(--text-secondary);">\n            Elige qu칠 cookies quieres permitir. Las cookies necesarias siempre est치n activadas.\n          </p>\n\n          ${Object.entries(n).map(([e,n])=>`\n            <div class="cookie-category">\n              <div class="cookie-category-header">\n                <label class="cookie-toggle">\n                  <input\n                    type="checkbox"\n                    id="cookie_${e}"\n                    ${n.required?"checked disabled":""}\n                    ${n.enabled&&!n.required?"checked":""}\n                  >\n                  <span class="cookie-toggle-slider"></span>\n                </label>\n                <div class="cookie-category-info">\n                  <h4>${n.name}${n.required?' <span style="color: var(--text-secondary); font-weight: 400;">(Obligatorias)</span>':""}</h4>\n                  <p>${n.description}</p>\n                </div>\n              </div>\n            </div>\n          `).join("")}\n        </div>\n        <div class="cookie-modal-footer">\n          <button id="cookieSavePreferences" class="btn primary">Guardar preferencias</button>\n          <button id="cookieModalCancel" class="btn ghost">Cancelar</button>\n        </div>\n      </div>\n    `,document.body.appendChild(e),document.getElementById("cookieModalClose").addEventListener("click",r),document.getElementById("cookieModalCancel").addEventListener("click",r),document.getElementById("cookieSavePreferences").addEventListener("click",u),e.addEventListener("click",function(n){n.target===e&&r()})}(),e=document.getElementById("cookieCustomizeModal")),e.style.display="flex"}function r(){const e=document.getElementById("cookieCustomizeModal");e&&(e.style.display="none")}function u(){i({necessary:!0,analytics:document.getElementById("cookie_analytics")?.checked||!1,marketing:document.getElementById("cookie_marketing")?.checked||!1,affiliates:document.getElementById("cookie_affiliates")?.checked||!0}),r(),m()}function m(){const e=document.getElementById("cookieConsentBanner");e&&(e.style.opacity="0",setTimeout(()=>{e.remove()},300))}function k(){const n=t(e);if(!n)return null;try{return JSON.parse(n)}catch(e){return null}}function g(){if(o()){const e=k();e&&e.preferences&&a(e.preferences)}else setTimeout(()=>{c()},500)}window.cookieConsent={show:function(){const e=document.getElementById("cookieConsentBanner");e&&e.remove(),c()},getCurrentConsent:k,hasConsent:o},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",g):g()}();